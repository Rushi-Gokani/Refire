{% doc %}
  @prompt
    Create a Shopify section titled "Why buy from us?" with four columns, each showing an icon, a bold title, and a short description. The style should be modern, clean, and centered. The icons should be simple line-style with blue color. Example items: "Fast & Free Shipping – All orders are processed within 3-5 business days", "Warranty Protection – All products are covered by a warranty service", "Secure Payments – Pay by debit or credit card, PayPal, or other secure platform", "Multi-channel Support – Contact us via email, phone or online customer service". Ensure good spacing, responsive layout, and professional typography., Update the section so that on mobile the four feature cards become horizontally scrollable with infinite loop scrolling, smooth touch drag, and snap-to-center effect, while keeping the same clean icons, bold titles, and descriptions., Update the section so that on mobile the main section title is visible at the top and the four feature cards become a horizontally scrollable, infinite-loop carousel with smooth touch drag, snap-to-center so each card sits centered in the viewport, proper padding so the centered card has breathing room, visible partial previous/next cards for context, keyboard and accessibility support (aria roles, focusable cards), and preserve the desktop four-column centered grid and blue line icons.

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}
{% style %}
  /* Container & layout */
  .ai-why-buy-section-{{ ai_gen_id }} {
    padding: {{ block.settings.section_padding_top }}px 20px {{ block.settings.section_padding_bottom }}px;
    background-color: {{ block.settings.background_color }};
    box-sizing: border-box;
    overflow: visible;
  }

  .ai-why-buy-container-{{ ai_gen_id }} {
    max-width: 1200px;
    margin: 0 auto;
    box-sizing: border-box;
  }

  .ai-why-buy-header-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: {{ block.settings.header_margin_bottom }}px;
  }

  .ai-why-buy-title-{{ ai_gen_id }} {
    color: {{ block.settings.title_color }};
    font-size: {{ block.settings.title_size }}px;
    font-weight: 700;
    margin: 0;
    line-height: 1.2;
  }

  .ai-why-buy-subtitle-{{ ai_gen_id }} {
    color: {{ block.settings.subtitle_color }};
    font-size: {{ block.settings.subtitle_size }}px;
    margin: 16px 0 0;
    line-height: 1.4;
  }

  /* Desktop grid */
  .ai-why-buy-grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: {{ block.settings.column_gap }}px;
    margin-top: {{ block.settings.content_margin_top }}px;
  }

  .ai-why-buy-column-{{ ai_gen_id }} {
    text-align: center;
    padding: {{ block.settings.column_padding }}px;
    background-color: {{ block.settings.column_background_color }};
    border-radius: {{ block.settings.column_border_radius }}px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .ai-why-buy-column-{{ ai_gen_id }}:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  }

  .ai-why-buy-icon-wrapper-{{ ai_gen_id }} {
    width: {{ block.settings.icon_size }}px;
    height: {{ block.settings.icon_size }}px;
    margin: 0 auto {{ block.settings.icon_margin_bottom }}px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: {{ block.settings.icon_background_color }};
    border-radius: 50%;
    box-sizing: border-box;
  }

  .ai-why-buy-icon-{{ ai_gen_id }} {
    width: calc({{ block.settings.icon_size }}px * 0.5);
    height: calc({{ block.settings.icon_size }}px * 0.5);
    stroke: {{ block.settings.icon_color }};
    stroke-width: 2;
    fill: none;
  }

  .ai-why-buy-column-title-{{ ai_gen_id }} {
    color: {{ block.settings.column_title_color }};
    font-size: {{ block.settings.column_title_size }}px;
    font-weight: 700;
    margin: 0 0 {{ block.settings.title_margin_bottom }}px;
    line-height: 1.3;
  }

  .ai-why-buy-column-description-{{ ai_gen_id }} {
    color: {{ block.settings.column_description_color }};
    font-size: {{ block.settings.column_description_size }}px;
    margin: 0;
    line-height: 1.5;
  }

  /* Carousel (mobile) wrapper — hidden on desktop */
  .ai-why-buy-carousel-wrapper-{{ ai_gen_id }} {
    display: none;
    overflow: hidden;
    margin-top: {{ block.settings.content_margin_top }}px;
    position: relative;
  }

  .ai-why-buy-carousel-track-{{ ai_gen_id }} {
    display: flex;
    transition: transform 0.35s ease;
    cursor: grab;
    touch-action: pan-y;
    will-change: transform;
    align-items: stretch;
  }

  .ai-why-buy-carousel-track-{{ ai_gen_id }}:active {
    cursor: grabbing;
  }

  .ai-why-buy-carousel-item-{{ ai_gen_id }} {
    flex: 0 0 calc(100vw - 80px);
    max-width: 320px;
    margin: 0 20px;
    text-align: center;
    padding: {{ block.settings.column_padding }}px;
    background-color: {{ block.settings.column_background_color }};
    border-radius: {{ block.settings.column_border_radius }}px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    scroll-snap-align: center;
    outline: none;
    position: relative;
    box-sizing: border-box; /* critical to avoid overflow from padding */
  }

  .ai-why-buy-carousel-item-{{ ai_gen_id }}:focus {
    outline: 2px solid {{ block.settings.icon_color }};
    outline-offset: 2px;
  }

  .ai-why-buy-carousel-item-{{ ai_gen_id }}:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  }

  .ai-why-buy-carousel-item-{{ ai_gen_id }}.centered {
    transform: scale(1.05);
    z-index: 2;
  }

  .ai-why-buy-sr-only-{{ ai_gen_id }} {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Responsive behavior */
  @media screen and (max-width: 990px) {
    .ai-why-buy-grid-{{ ai_gen_id }} { grid-template-columns: repeat(2, 1fr); gap: {{ block.settings.column_gap | times: 0.8 }}px; }
  }

  @media screen and (max-width: 749px) {
    .ai-why-buy-section-{{ ai_gen_id }} {
      padding: {{ block.settings.section_padding_top | times: 0.7 }}px 0 {{ block.settings.section_padding_bottom | times: 0.7 }}px;
    }

    .ai-why-buy-container-{{ ai_gen_id }} { padding: 0 16px; }

    /* hide desktop grid, show mobile carousel */
    .ai-why-buy-grid-{{ ai_gen_id }} { display: none; }
    .ai-why-buy-carousel-wrapper-{{ ai_gen_id }} {
      display: block;
      margin-left: -16px;
      margin-right: -16px;
      padding: 12px 0;
    }

    .ai-why-buy-title-{{ ai_gen_id }} { font-size: {{ block.settings.title_size | times: 0.9 }}px; }
    .ai-why-buy-subtitle-{{ ai_gen_id }} { font-size: {{ block.settings.subtitle_size | times: 0.95 }}px; }
    .ai-why-buy-column-title-{{ ai_gen_id }} { font-size: {{ block.settings.column_title_size | times: 0.95 }}px; }
    .ai-why-buy-column-description-{{ ai_gen_id }} { font-size: {{ block.settings.column_description_size | times: 0.95 }}px; }

    .ai-why-buy-carousel-item-{{ ai_gen_id }} { flex: 0 0 calc(100vw - 80px); margin: 0 20px; }
  }

  @media screen and (max-width: 480px) {
    .ai-why-buy-carousel-item-{{ ai_gen_id }} { flex: 0 0 calc(100vw - 60px); margin: 0 15px; }
  }

  @media (prefers-reduced-motion: reduce) {
    .ai-why-buy-carousel-track-{{ ai_gen_id }} { transition: none !important; }
  }
{% endstyle %}

 <why-buy-carousel-{{ ai_gen_id }} class="ai-why-buy-section-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-why-buy-container-{{ ai_gen_id }}">
    {% if block.settings.section_title != blank or block.settings.section_subtitle != blank %}
      <div class="ai-why-buy-header-{{ ai_gen_id }}">
        {% if block.settings.section_title != blank %}
          <h2 class="ai-why-buy-title-{{ ai_gen_id }}">{{ block.settings.section_title }}</h2>
        {% endif %}
        {% if block.settings.section_subtitle != blank %}
          <p class="ai-why-buy-subtitle-{{ ai_gen_id }}">{{ block.settings.section_subtitle }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="ai-why-buy-grid-{{ ai_gen_id }}">
      <div class="ai-why-buy-column-{{ ai_gen_id }}">
        <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
          <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10"/>
          </svg>
        </div>
        <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_1_title }}</h3>
        <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_1_description }}</p>
      </div>

      <div class="ai-why-buy-column-{{ ai_gen_id }}">
        <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
          <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </div>
        <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_2_title }}</h3>
        <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_2_description }}</p>
      </div>

      <div class="ai-why-buy-column-{{ ai_gen_id }}">
        <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
          <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
          </svg>
        </div>
        <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_3_title }}</h3>
        <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_3_description }}</p>
      </div>

      <div class="ai-why-buy-column-{{ ai_gen_id }}">
        <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
          <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24">
            <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
          </svg>
        </div>
        <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_4_title }}</h3>
        <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_4_description }}</p>
      </div>
    </div>

    <div class="ai-why-buy-carousel-wrapper-{{ ai_gen_id }}" role="region" aria-label="Features carousel">
      <div class="ai-why-buy-carousel-track-{{ ai_gen_id }}" role="group" aria-live="polite">
        <div class="ai-why-buy-carousel-item-{{ ai_gen_id }}" tabindex="0" role="group" aria-label="Feature 1 of 4">
          <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
            <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10"/>
            </svg>
          </div>
          <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_1_title }}</h3>
          <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_1_description }}</p>
        </div>

        <div class="ai-why-buy-carousel-item-{{ ai_gen_id }}" tabindex="0" role="group" aria-label="Feature 2 of 4">
          <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
            <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_2_title }}</h3>
          <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_2_description }}</p>
        </div>

        <div class="ai-why-buy-carousel-item-{{ ai_gen_id }}" tabindex="0" role="group" aria-label="Feature 3 of 4">
          <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
            <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
            </svg>
          </div>
          <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_3_title }}</h3>
          <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_3_description }}</p>
        </div>

        <div class="ai-why-buy-carousel-item-{{ ai_gen_id }}" tabindex="0" role="group" aria-label="Feature 4 of 4">
          <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
            <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
            </svg>
          </div>
          <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_4_title }}</h3>
          <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_4_description }}</p>
        </div>

        <div class="ai-why-buy-carousel-item-{{ ai_gen_id }}" tabindex="-1" role="group" aria-label="Feature 1 of 4" aria-hidden="true">
          <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
            <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10"/>
            </svg>
          </div>
          <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_1_title }}</h3>
          <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_1_description }}</p>
        </div>

        <div class="ai-why-buy-carousel-item-{{ ai_gen_id }}" tabindex="-1" role="group" aria-label="Feature 2 of 4" aria-hidden="true">
          <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
            <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_2_title }}</h3>
          <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_2_description }}</p>
        </div>

        <div class="ai-why-buy-carousel-item-{{ ai_gen_id }}" tabindex="-1" role="group" aria-label="Feature 3 of 4" aria-hidden="true">
          <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
            <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
            </svg>
          </div>
          <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_3_title }}</h3>
          <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_3_description }}</p>
        </div>

        <div class="ai-why-buy-carousel-item-{{ ai_gen_id }}" tabindex="-1" role="group" aria-label="Feature 4 of 4" aria-hidden="true">
          <div class="ai-why-buy-icon-wrapper-{{ ai_gen_id }}">
            <svg class="ai-why-buy-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
            </svg>
          </div>
          <h3 class="ai-why-buy-column-title-{{ ai_gen_id }}">{{ block.settings.column_4_title }}</h3>
          <p class="ai-why-buy-column-description-{{ ai_gen_id }}">{{ block.settings.column_4_description }}</p>
        </div>
      </div>
      <div class="ai-why-buy-sr-only-{{ ai_gen_id }}" aria-live="polite" aria-atomic="true"></div>
    </div>
  </div>
</why-buy-carousel-{{ ai_gen_id }}>

<script>
  (function() {
    class WhyBuyCarousel{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
        this.track = null;
        this.items = [];
        this.currentIndex = 0;
        this.totalItems = 4;
        this.itemWidth = 0;
        this.isDragging = false;
        this.startX = 0;
        this.currentX = 0;
        this.initialTransform = 0;
        this.autoScrollInterval = null;
        this.srLiveRegion = null;
      }

      connectedCallback() {
        this.track = this.querySelector('.ai-why-buy-carousel-track-{{ ai_gen_id }}');
        this.items = Array.from(this.querySelectorAll('.ai-why-buy-carousel-item-{{ ai_gen_id }}'));
        this.srLiveRegion = this.querySelector('.ai-why-buy-sr-only-{{ ai_gen_id }}');
        
        if (this.track && this.items.length > 0) {
          this.setupCarousel();
          this.setupEventListeners();
          this.updateCenteredItem();
          this.startAutoScroll();
        }
      }

      disconnectedCallback() {
        this.stopAutoScroll();
      }

      setupCarousel() {
        this.calculateItemWidth();
        this.updateTransform();
      }

      calculateItemWidth() {
        if (this.items.length > 0) {
          const itemRect = this.items[0].getBoundingClientRect();
          const itemStyle = window.getComputedStyle(this.items[0]);
          const marginLeft = parseFloat(itemStyle.marginLeft);
          const marginRight = parseFloat(itemStyle.marginRight);
          this.itemWidth = itemRect.width + marginLeft + marginRight;
        }
      }

      setupEventListeners() {
        this.track.addEventListener('touchstart', this.handleTouchStart.bind(this), { passive: false });
        this.track.addEventListener('touchmove', this.handleTouchMove.bind(this), { passive: false });
        this.track.addEventListener('touchend', this.handleTouchEnd.bind(this), { passive: false });
        
        this.track.addEventListener('mousedown', this.handleMouseDown.bind(this));
        this.track.addEventListener('mousemove', this.handleMouseMove.bind(this));
        this.track.addEventListener('mouseup', this.handleMouseUp.bind(this));
        this.track.addEventListener('mouseleave', this.handleMouseUp.bind(this));

        this.track.addEventListener('mouseenter', this.stopAutoScroll.bind(this));
        this.track.addEventListener('mouseleave', this.startAutoScroll.bind(this));

        this.items.forEach((item, index) => {
          if (index < this.totalItems) {
            item.addEventListener('keydown', this.handleKeyDown.bind(this));
            item.addEventListener('focus', () => {
              this.currentIndex = index;
              this.updateTransform();
              this.updateCenteredItem();
              this.stopAutoScroll();
            });
            item.addEventListener('blur', () => {
              this.startAutoScroll();
            });
          }
        });

        window.addEventListener('resize', this.handleResize.bind(this));
      }

      handleKeyDown(e) {
        switch (e.key) {
          case 'ArrowLeft':
            e.preventDefault();
            this.goToPrevious();
            break;
          case 'ArrowRight':
            e.preventDefault();
            this.goToNext();
            break;
          case 'Home':
            e.preventDefault();
            this.goToSlide(0);
            break;
          case 'End':
            e.preventDefault();
            this.goToSlide(this.totalItems - 1);
            break;
        }
      }

      handleTouchStart(e) {
        this.stopAutoScroll();
        this.isDragging = true;
        this.startX = e.touches[0].clientX;
        this.initialTransform = this.getCurrentTransform();
        this.track.style.transition = 'none';
      }

      handleTouchMove(e) {
        if (!this.isDragging) return;
        e.preventDefault();
        
        this.currentX = e.touches[0].clientX;
        const deltaX = this.currentX - this.startX;
        const newTransform = this.initialTransform + deltaX;
        this.track.style.transform = `translateX(${newTransform}px)`;
      }

      handleTouchEnd(e) {
        if (!this.isDragging) return;
        this.isDragging = false;
        
        const deltaX = this.currentX - this.startX;
        const threshold = this.itemWidth / 3;
        
        if (Math.abs(deltaX) > threshold) {
          if (deltaX > 0) {
            this.goToPrevious();
          } else {
            this.goToNext();
          }
        } else {
          this.updateTransform();
        }
        
        this.startAutoScroll();
      }

      handleMouseDown(e) {
        this.stopAutoScroll();
        this.isDragging = true;
        this.startX = e.clientX;
        this.initialTransform = this.getCurrentTransform();
        this.track.style.transition = 'none';
        e.preventDefault();
      }

      handleMouseMove(e) {
        if (!this.isDragging) return;
        
        this.currentX = e.clientX;
        const deltaX = this.currentX - this.startX;
        const newTransform = this.initialTransform + deltaX;
        this.track.style.transform = `translateX(${newTransform}px)`;
      }

      handleMouseUp(e) {
        if (!this.isDragging) return;
        this.isDragging = false;
        
        const deltaX = this.currentX - this.startX;
        const threshold = this.itemWidth / 3;
        
        if (Math.abs(deltaX) > threshold) {
          if (deltaX > 0) {
            this.goToPrevious();
          } else {
            this.goToNext();
          }
        } else {
          this.updateTransform();
        }
        
        this.startAutoScroll();
      }

      handleResize() {
        this.calculateItemWidth();
        this.updateTransform();
      }

      getCurrentTransform() {
        const transform = window.getComputedStyle(this.track).transform;
        if (transform === 'none') return 0;
        const matrix = transform.match(/matrix.*\((.+)\)/)[1].split(', ');
        return parseFloat(matrix[4]) || 0;
      }

      goToNext() {
        this.currentIndex = (this.currentIndex + 1) % this.totalItems;
        this.updateTransform();
        this.updateCenteredItem();
        this.announceCurrentSlide();
      }

      goToPrevious() {
        this.currentIndex = (this.currentIndex - 1 + this.totalItems) % this.totalItems;
        this.updateTransform();
        this.updateCenteredItem();
        this.announceCurrentSlide();
      }

      goToSlide(index) {
        this.currentIndex = index;
        this.updateTransform();
        this.updateCenteredItem();
        this.announceCurrentSlide();
      }

      updateTransform() {
        this.track.style.transition = 'transform 0.3s ease';
        const containerWidth = this.track.parentElement.offsetWidth;
        const centerOffset = (containerWidth - this.itemWidth) / 2;
        const translateX = centerOffset - (this.currentIndex * this.itemWidth);
        this.track.style.transform = `translateX(${translateX}px)`;
      }

      updateCenteredItem() {
        this.items.forEach((item, index) => {
          const actualIndex = index % this.totalItems;
          if (actualIndex === this.currentIndex) {
            item.classList.add('centered');
            if (index < this.totalItems) {
              item.setAttribute('tabindex', '0');
              item.removeAttribute('aria-hidden');
            }
          } else {
            item.classList.remove('centered');
            if (index < this.totalItems) {
              item.setAttribute('tabindex', '-1');
            } else {
              item.setAttribute('aria-hidden', 'true');
            }
          }
        });
      }

      announceCurrentSlide() {
        if (this.srLiveRegion) {
          const currentSlide = this.currentIndex + 1;
          this.srLiveRegion.textContent = `Showing feature ${currentSlide} of ${this.totalItems}`;
        }
      }

      startAutoScroll() {
        this.stopAutoScroll();
        this.autoScrollInterval = setInterval(() => {
          this.goToNext();
        }, 4000);
      }

      stopAutoScroll() {
        if (this.autoScrollInterval) {
          clearInterval(this.autoScrollInterval);
          this.autoScrollInterval = null;
        }
      }
    }

    customElements.define('why-buy-carousel-{{ ai_gen_id }}', WhyBuyCarousel{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Why buy from us",
  "settings": [
    {
      "type": "header",
      "content": "Section header"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Title",
      "default": "Why buy from us?"
    },
    {
      "type": "textarea",
      "id": "section_subtitle",
      "label": "Subtitle",
      "default": "Discover the benefits that make us your trusted choice"
    },
    {
      "type": "header",
      "content": "Column 1"
    },
    {
      "type": "text",
      "id": "column_1_title",
      "label": "Title",
      "default": "Fast & Free Shipping"
    },
    {
      "type": "textarea",
      "id": "column_1_description",
      "label": "Description",
      "default": "All orders are processed within 3-5 business days"
    },
    {
      "type": "header",
      "content": "Column 2"
    },
    {
      "type": "text",
      "id": "column_2_title",
      "label": "Title",
      "default": "Warranty Protection"
    },
    {
      "type": "textarea",
      "id": "column_2_description",
      "label": "Description",
      "default": "All products are covered by a warranty service"
    },
    {
      "type": "header",
      "content": "Column 3"
    },
    {
      "type": "text",
      "id": "column_3_title",
      "label": "Title",
      "default": "Secure Payments"
    },
    {
      "type": "textarea",
      "id": "column_3_description",
      "label": "Description",
      "default": "Pay by debit or credit card, PayPal, or other secure platform"
    },
    {
      "type": "header",
      "content": "Column 4"
    },
    {
      "type": "text",
      "id": "column_4_title",
      "label": "Title",
      "default": "Multi-channel Support"
    },
    {
      "type": "textarea",
      "id": "column_4_description",
      "label": "Description",
      "default": "Contact us via email, phone or online customer service"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Subtitle",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "column_background_color",
      "label": "Column background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "column_title_color",
      "label": "Column title",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "column_description_color",
      "label": "Column description",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon",
      "default": "#2563eb"
    },
    {
      "type": "color",
      "id": "icon_background_color",
      "label": "Icon background",
      "default": "#eff6ff"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Title size",
      "default": 36
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Subtitle size",
      "default": 16
    },
    {
      "type": "range",
      "id": "column_title_size",
      "min": 14,
      "max": 28,
      "step": 1,
      "unit": "px",
      "label": "Column title size",
      "default": 20
    },
    {
      "type": "range",
      "id": "column_description_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Column description size",
      "default": 14
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 80
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 80
    },
    {
      "type": "range",
      "id": "header_margin_bottom",
      "min": 20,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Header bottom margin",
      "default": 48
    },
    {
      "type": "range",
      "id": "content_margin_top",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Content top margin",
      "default": 24
    },
    {
      "type": "range",
      "id": "column_gap",
      "min": 16,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Column gap",
      "default": 32
    },
    {
      "type": "range",
      "id": "column_padding",
      "min": 16,
      "max": 48,
      "step": 4,
      "unit": "px",
      "label": "Column padding",
      "default": 32
    },
    {
      "type": "range",
      "id": "column_border_radius",
      "min": 0,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Column border radius",
      "default": 12
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 40,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Icon container size",
      "default": 64
    },
    {
      "type": "range",
      "id": "icon_margin_bottom",
      "min": 8,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Icon bottom margin",
      "default": 20
    },
    {
      "type": "range",
      "id": "title_margin_bottom",
      "min": 8,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Title bottom margin",
      "default": 12
    }
  ],
  "presets": [
    {
      "name": "Why buy from us"
    }
  ],
  "tag": null
}
{% endschema %}